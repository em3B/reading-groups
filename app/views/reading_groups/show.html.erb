<div class="wrapper">
<div class="push"></div>
<%# sidebar column %>
<div class="daily-sidebar">
  <%= render "shared/sidebar"  %>
</div>
<%# text and question together %>
<div class="content">
  <%# text column %>
  <div class="daily-text">
    <h1 class="text-center m-5">Today is <%= Date.today.day %>/<%= Date.today.mon  %></h1>
    <p style="white-space: pre-line;"><%= @reading_group.daily_readings.first.excerpt %></p>
  </div>
  <%# question column %>
  <div class="daily-questions">
    <% @reading_group.questions.each_with_index do |question, i|%>
    <%# for non extension questions %>
          <!-- Button trigger modal -->
      <% if question.extension == false  %>
        <div class="question-buttons">
          <button type="button" class="modal-questions-btn" data-toggle="modal" data-target="#questionModal-<%=i%>">
            Question
          </button>
        </div>
                <!-- Modal -->
        <div class="modal fade" id="questionModal-<%=i%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"><%= question.content %></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
                <div class="modal-body">
                  <div class="mb-3">
                    <%= simple_form_for(@answer) do |f| %>
                      <%= f.hidden_field :question_id, value: question.id %>
                      <%= f.hidden_field :reading_group_id, value: @reading_group.id %>
                      <%= f.label :content, class: "col-form-label" %>
                      <%= f.text_field :content, class: "form-control", id: "student-answer" %>
                      <%= f.submit class: "modal-questions-btn m-3"%>
                    <% end %>
                  </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="modal-questions-btn">Save changes</button>
              </div>
            </div>
          </div>
        </div>
      <%# for extension questions %>
      <% else %>
        <button type="button" class="subscription-btn" data-toggle="modal" data-target="#exampleModal">
          <div class="subscription-img">
            <%= cl_image_tag("https://res.cloudinary.com/dm37aktki/image/upload/v1646144180/Depositphotos_50322049_S_yjdtuf.jpg") %>
          </div>
          Extension Question
        </button>

        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"><%= question.content %></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form>
                  <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">My Answer:</label>
                    <input type="text" class="form-control" id="student-answer">
                  </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="modal-questions-btn">Save changes</button>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
  <%# extension question %>
</div>
<%# chat box %>
<button class="open-button" type="button">Chat</button>

<div class="chat-popup form-container" id="myForm">
  <%= simple_form_for(@reading_group) do |f| %>
    <h1>Chat</h1>

    <%= f.label :questions, "Message" %>
    <%= f.text_area :questions %>

    <button type="submit" class="btn-chat">Send</button>
    <button type="button" id="btn-cancel">Close</button>
  <% end %>
</div>
<div class="push"></div>
</div>
